{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/MateBook/Desktop/look-for-image/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/MateBook/Desktop/look-for-image/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:/Users/MateBook/Desktop/look-for-image/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:/Users/MateBook/Desktop/look-for-image/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/MateBook/Desktop/look-for-image/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/MateBook/Desktop/look-for-image/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/MateBook/Desktop/look-for-image/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/MateBook/Desktop/look-for-image/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import OpenedImage from'./openedImage';import lupe from'./icons/loupe.png';import cross from\"./icons/letter-x.png\";import arrow from'./icons/arrow.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var tomTomApiKey=\"MmTYW8cbCvlP0Ldmo9cUDGwEyyqEUq0G\";var APIAccessKey=\"6PMB_sssC924TiZ3jPaY4Iwo4KZ0E6d6xZ0dgSbK4_g\";var SecondPage=/*#__PURE__*/function(_React$Component){_inherits(SecondPage,_React$Component);var _super=_createSuper(SecondPage);function SecondPage(props){var _this;_classCallCheck(this,SecondPage);_this=_super.call(this,props);_this.state={showParticularPic:false,images:[],leftImages:[],midImages:[],rightImages:[],query:props.mainInput.charAt(0).toUpperCase()+props.mainInput.slice(1),picOrientation:\"\",imgId:\"\",smallImg:\"\",rawImg:\"\",name:\"\",username:\"\",location:\"\",profileImg:\"\",scrollnum:1,imgsFromScroll:[],resizeImages:[],hints:[],tags:[]};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.clearInput=_this.clearInput.bind(_assertThisInitialized(_this));_this.openImage=_this.openImage.bind(_assertThisInitialized(_this));_this.setPicData=_this.setPicData.bind(_assertThisInitialized(_this));_this.fetchAPI=_this.fetchAPI.bind(_assertThisInitialized(_this));_this.scrollUpdate=_this.scrollUpdate.bind(_assertThisInitialized(_this));_this.preparePicToOpen=_this.preparePicToOpen.bind(_assertThisInitialized(_this));_this.showOnImageInfo=_this.showOnImageInfo.bind(_assertThisInitialized(_this));_this.hideOnPicImageInfo=_this.hideOnPicImageInfo.bind(_assertThisInitialized(_this));_this.fetchApiHints=_this.fetchApiHints.bind(_assertThisInitialized(_this));_this.handleArrow=_this.handleArrow.bind(_assertThisInitialized(_this));_this.handleTag=_this.handleTag.bind(_assertThisInitialized(_this));_this.scrollRigth=_this.scrollRigth.bind(_assertThisInitialized(_this));_this.scrollLeft=_this.scrollLeft.bind(_assertThisInitialized(_this));return _this;}_createClass(SecondPage,[{key:\"fetchAPI\",value:function fetchAPI(page,inpValue){var _this2=this;fetch(\"https://api.unsplash.com/search/photos/?\"+\"&client_id=\"+APIAccessKey+\"&query=\"+this.props.mainInput+\"&per_page=30\"+\"&page=\"+page).then(function(response){return response.json();}).then(function(data,fetchedUrls){return fetchedUrls=data.results.map(function(elem){return[elem.urls.small,elem.urls.regular,elem.user.name,elem.user.username,elem.user.location,elem.user.profile_image.medium,elem.id,elem.alt_description,elem.tags];});}).then(function(data){return _this2.setState({images:data.length>0?data:\"empty\"});}).then(function(data){return _this2.setState({leftImages:_this2.state.images===\"empty\"?_this2.state.leftImages:_this2.state.leftImages.concat(_this2.state.images.filter(function(_,i){return i%3===0;}))});}).then(function(data){return _this2.setState({midImages:_this2.state.images===\"empty\"?_this2.state.midImages:_this2.state.midImages.concat(_this2.state.images.slice(2).filter(function(_,i){return i%3===0;}))});}).then(function(data){return _this2.setState({rightImages:_this2.state.images===\"empty\"?_this2.state.rightImages:_this2.state.rightImages.concat(_this2.state.images.slice(1).filter(function(_,i){return i%3===0;}))});}).then(function(data){return _this2.setState({resizeImages:_this2.state.images===\"empty\"?_this2.state.resizeImages:_this2.state.resizeImages.concat(_this2.state.images)});}).then(function(gettags){return gettags=_this2.state.images.map(function(elem){return elem[8].length>1?elem[8][1]:null;}).filter(function(elem){return elem!==null;}).map(function(elem){return elem.title;}).filter(function(e){return e!==_this2.props.mainInput;}).filter(function(e){return e.length<=16;});}).then(function(data){return _this2.setState({tags:_toConsumableArray(new Set(data))});}).catch(function(err){return console.log(err);});// to hide no hints alert and tags\nthis.clearInput();this.setState({tags:[]});}},{key:\"scrollUpdate\",value:function scrollUpdate(){if(this.state.showParticularPic===true||this.state.images===\"empty\"){return;}var lastDiv=document.querySelector(\".secondPage__imagesContainer\");if(lastDiv.getBoundingClientRect().bottom-1<window.innerHeight){this.fetchAPI(this.state.scrollnum+1);this.setState({scrollnum:this.state.scrollnum+1});}}},{key:\"showOnImageInfo\",value:function showOnImageInfo(event){this.setPicData(event);var id=event.target.id;var userInfoDiv=document.getElementById(\"onImg__innerInfoDiv\"+id);var resizeUserInfoDiv=document.getElementById(\"resize__onImg__innerInfoDiv\"+id);userInfoDiv.style[\"display\"]=\"flex\";resizeUserInfoDiv.style[\"display\"]=\"flex\";}},{key:\"hideOnPicImageInfo\",value:function hideOnPicImageInfo(event){var id=event.target.id;var userInfoDiv=document.getElementById(\"onImg__innerInfoDiv\"+id);var resizeUserInfoDiv=document.getElementById(\"resize__onImg__innerInfoDiv\"+id);userInfoDiv.style[\"display\"]=\"none\";resizeUserInfoDiv.style[\"display\"]=\"none\";}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;this.fetchAPI(1);// console.log(this.state.images)\n// scroll function\nwindow.addEventListener('scroll',this.scrollUpdate);// fetch on hints list click\nvar inp=document.getElementById(\"secondPage__form__search\");var eventSource=null;var value='';inp.addEventListener('keydown',function(e){eventSource=e.key?'':'list';});inp.addEventListener('input',function(e){value=e.target.value;if(eventSource==='list'){_this3.setState({images:[],leftImages:[],midImages:[],rightImages:[],resizeImages:[]});_this3.props.setMainInput(value);_this3.setState({query:value});_this3.fetchAPI(1);}});}},{key:\"handleChange\",value:function(){var _handleChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.props.setMainInput(event.target.value.toLowerCase());case 2:if(event.target.value.length>2){this.fetchApiHints();}else{this.setState({hints:[]});}case 3:case\"end\":return _context.stop();}}},_callee,this);}));function handleChange(_x){return _handleChange.apply(this,arguments);}return handleChange;}()},{key:\"handleSubmit\",value:function handleSubmit(event){event.preventDefault();this.setState({images:[],leftImages:[],midImages:[],rightImages:[],resizeImages:[]});this.fetchAPI(1);var upperCaseInputFirstChar=this.props.mainInput.charAt(0).toUpperCase()+this.props.mainInput.slice(1);this.setState({query:upperCaseInputFirstChar});}},{key:\"clearInput\",value:function clearInput(){var inp=document.querySelector(\".secondPage__form__search\");if(inp.value===\"\"){return;}this.props.setMainInput(\"\");inp.value=\"\";this.setState({hints:[]});}},{key:\"openImage\",value:function openImage(event){this.setState({showParticularPic:!this.state.showParticularPic});}},{key:\"setPicData\",value:function setPicData(event){var pic=[];var id=event.target.id;var picContainer=event.target.className;if(picContainer===\"leftImg\"){this.state.leftImages.map(function(elem){return elem.includes(id)?pic.push(elem):null;});}else if(picContainer===\"midImg\"){this.state.midImages.map(function(elem){return elem.includes(id)?pic.push(elem):null;});}else if(picContainer===\"rightImg\"){this.state.rightImages.map(function(elem){return elem.includes(id)?pic.push(elem):null;});}else if(picContainer===\"resizeImg\"){this.state.resizeImages.map(function(elem){return elem.includes(id)?pic.push(elem):null;});}this.setState({imgId:pic[0][6],rawImg:pic[0][1],name:pic[0][2],username:pic[0][3],location:pic[0][4],profileImg:pic[0][5]});}},{key:\"preparePicToOpen\",value:function preparePicToOpen(event){this.setPicData(event);var picWidth=event.target.width;var picHeight=event.target.height;if(picWidth>=picHeight){this.setState({picOrientation:\"horizontal\"});}else{this.setState({picOrientation:\"vertical\"});}this.openImage();}},{key:\"fetchApiHints\",value:function fetchApiHints(){var _this4=this;var regex=new RegExp(\"\".concat(this.props.mainInput));fetch(\"https://api.tomtom.com/search/\"+\"2\"+\"/autocomplete/\"+this.props.mainInput+\".\"+\"json\"+\"?key=\"+tomTomApiKey+\"&language=en-GB\"+\"&limit=8\").then(function(res){return res.json();}).then(function(data,fetchedDesriptions){return fetchedDesriptions=data.results.map(function(elem){return elem.segments[0].value.toLowerCase();});}).then(function(data,setData){return setData=_toConsumableArray(new Set(data));}).then(function(data,filteredData){return filteredData=data.filter(function(elem){return elem.match(regex);});})// .then((data, clearedData) => clearedData = data.filter(elem => elem !== this.props.mainInput))\n.then(function(data){return _this4.setState({hints:data.length<1?[\"No hints for choosen query\"]:data});}).catch(function(err){return _this4.setState({hints:[]});});}},{key:\"handleArrow\",value:function handleArrow(){this.props.changePage();}},{key:\"handleTag\",value:function(){var _handleTag=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var tag;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:tag=event.target.id;_context2.next=3;return this.props.setMainInput(tag);case 3:this.setState({query:tag.charAt(0).toUpperCase()+tag.slice(1)});this.setState({images:[],leftImages:[],midImages:[],rightImages:[],resizeImages:[]});this.fetchAPI(1);case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function handleTag(_x2){return _handleTag.apply(this,arguments);}return handleTag;}()},{key:\"scrollRigth\",value:function scrollRigth(){var innerTagsDiv=document.getElementById(\"innerTagsDiv\");innerTagsDiv.scrollBy(350,0);var lA=document.getElementById(\"leftArrowHolder\");lA.style[\"visibility\"]=\"visible\";var tagHolderslist=document.querySelectorAll(\".tagHolder\");var rA=document.getElementById(\"rightArrowHolder\");if(tagHolderslist[tagHolderslist.length-1].getBoundingClientRect().right<rA.getBoundingClientRect().right){rA.style[\"visibility\"]=\"hidden\";}}},{key:\"scrollLeft\",value:function scrollLeft(){var innerTagsDiv=document.getElementById(\"innerTagsDiv\");innerTagsDiv.scrollBy(-350,0);var rA=document.getElementById(\"rightArrowHolder\");rA.style[\"visibility\"]=\"visible\";var tagHolderslist=document.querySelectorAll(\".tagHolder\");var lA=document.getElementById(\"leftArrowHolder\");if(tagHolderslist[0].getBoundingClientRect().left>lA.getBoundingClientRect().left){lA.style[\"visibility\"]=\"hidden\";}}},{key:\"handleTagArrows\",value:function handleTagArrows(){var rA=document.getElementById(\"rightArrowHolder\");console.log(rA.getBoundingClientRect().bottom);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.tags.length>1){var rA=document.getElementById(\"rightArrowHolder\");var tagHolderslist=document.querySelectorAll(\".tagHolder\");if(tagHolderslist[tagHolderslist.length-1].getBoundingClientRect().right>rA.getBoundingClientRect().left&&tagHolderslist[tagHolderslist.length-1].getBoundingClientRect().right>rA.getBoundingClientRect().right){rA.style[\"visibility\"]=\"visible\";}}}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"secondPageMainDiv\",id:\"secondPageMainDiv\",children:[/*#__PURE__*/_jsx(\"img\",{onClick:this.handleArrow,alt:\"left_arrow_icon\",src:arrow,title:\"Go back\",className:\"arrowBack\",id:\"arrowBack\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"secondPage__form\",onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"button\",{onClick:this.handleSubmit,title:\"Search for pictures\",type:\"button\",className:\"secondPage__form__lupeBtn\",children:/*#__PURE__*/_jsx(\"img\",{className:\"lupeIcon\",alt:\"lupe_icon\",src:lupe})}),/*#__PURE__*/_jsx(\"input\",{list:\"autocomplite\",autoComplete:\"off\",title:\"Search for pictures\",required:true,onChange:this.handleChange,placeholder:\"Search...\",id:\"secondPage__form__search\",className:\"secondPage__form__search\",type:\"search\"}),/*#__PURE__*/_jsx(\"datalist\",{id:\"autocomplite\",children:this.state.hints.map(function(elem){return/*#__PURE__*/_jsx(\"option\",{value:elem,children:elem},elem);})}),/*#__PURE__*/_jsx(\"button\",{title:\"Clear form\",type:\"button\",onClick:this.clearInput,className:\"secondPage__form__clearBtn\",children:/*#__PURE__*/_jsx(\"img\",{className:\"crossIcon\",alt:\"cross_icon\",src:cross})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"alertDiv\",children:/*#__PURE__*/_jsx(\"p\",{className:\"alertP\",children:this.state.hints[0]===\"No hints for choosen query\"?\" -- \"+this.state.hints[0]:null})}),/*#__PURE__*/_jsx(\"h1\",{className:\"secondPage__h1\",children:this.state.query}),this.state.tags.length>1?/*#__PURE__*/_jsxs(\"div\",{className:\"mainTagsDiv\",id:\"mainTagsDiv\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"leftArrowHolder\",id:\"leftArrowHolder\",children:/*#__PURE__*/_jsx(\"div\",{onClick:this.scrollLeft,className:\"leftArrow\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"rightArrowHolder\",id:\"rightArrowHolder\",children:/*#__PURE__*/_jsx(\"div\",{onClick:this.scrollRigth,className:\"rightArrow\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"innerTagsDiv\",id:\"innerTagsDiv\",children:this.state.tags.map(function(elem){return/*#__PURE__*/_jsx(\"div\",{onClick:_this5.handleTag,id:elem,className:\"tagHolder\",children:/*#__PURE__*/_jsx(\"p\",{id:elem,className:\"tagP\",children:elem.charAt(0).toUpperCase()+elem.slice(1)},elem)},elem+\"LI\");})})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"secondPage__imagesContainer\",id:\"secondPage__imagesContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"resizeImagesDiv\",id:\"resizeImagesDiv\",children:this.state.resizeImages.length>0?this.state.resizeImages.map(function(elem){return/*#__PURE__*/_jsxs(\"div\",{className:\"resizeImageHolder\",id:\"resizeImageHolder\"+elem[6],onClick:_this5.preparePicToOpen,imgid:elem[6],children:[/*#__PURE__*/_jsx(\"img\",{onMouseEnter:_this5.showOnImageInfo,onMouseLeave:_this5.hideOnPicImageInfo,id:elem[6],className:\"resizeImg\",alt:elem[7],src:elem[0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"resize__onImg__innerInfoDiv\",id:\"resize__onImg__innerInfoDiv\"+elem[6],children:[/*#__PURE__*/_jsx(\"img\",{className:\"resize__onImg__profile_photo\",alt:\"profile_photo\",src:_this5.state.profileImg}),/*#__PURE__*/_jsx(\"div\",{className:\"resize__onImg__userInfoDiv\",children:/*#__PURE__*/_jsx(\"p\",{className:\"resize__onImg__nameP\",children:_this5.state.name})})]})]},elem[6]);}):/*#__PURE__*/_jsx(\"h2\",{style:{color:\"red\"},children:\"No results for given queries. Try with another ones.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"leftImagesDiv\",id:\"leftImagesDiv\",children:this.state.leftImages.length>0?this.state.leftImages.map(function(elem){return/*#__PURE__*/_jsxs(\"div\",{className:\"leftImageHolder\",id:\"leftImageHolder\"+elem[6],onClick:_this5.preparePicToOpen,imgid:elem[6],children:[/*#__PURE__*/_jsx(\"img\",{onMouseEnter:_this5.showOnImageInfo,onMouseLeave:_this5.hideOnPicImageInfo,id:elem[6],className:\"leftImg\",alt:elem[7],src:elem[0],title:elem[7]}),/*#__PURE__*/_jsxs(\"div\",{className:\"onImg__innerInfoDiv\",id:\"onImg__innerInfoDiv\"+elem[6],children:[/*#__PURE__*/_jsx(\"img\",{className:\"onImg__profile_photo\",alt:\"profile_photo\",src:_this5.state.profileImg}),/*#__PURE__*/_jsx(\"div\",{className:\"onImg__userInfoDiv\",children:/*#__PURE__*/_jsx(\"p\",{className:\"onImg__nameP\",children:_this5.state.name})})]})]},elem[6]);}):/*#__PURE__*/_jsx(\"h2\",{style:{color:\"red\"},children:\"No results for given queries. Try with another ones.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"midImagesDiv\",id:\"midImagesDiv\",children:this.state.midImages.map(function(elem){return/*#__PURE__*/_jsxs(\"div\",{className:\"midImageHolder\",id:\"midImageHolder\"+elem[6],onClick:_this5.preparePicToOpen,imgid:elem[6],children:[/*#__PURE__*/_jsx(\"img\",{onMouseEnter:_this5.showOnImageInfo,onMouseLeave:_this5.hideOnPicImageInfo,id:elem[6],className:\"midImg\",alt:elem[7],src:elem[0],title:elem[7]}),/*#__PURE__*/_jsxs(\"div\",{className:\"onImg__innerInfoDiv\",id:\"onImg__innerInfoDiv\"+elem[6],children:[/*#__PURE__*/_jsx(\"img\",{className:\"onImg__profile_photo\",alt:\"profile_photo\",src:_this5.state.profileImg}),/*#__PURE__*/_jsx(\"div\",{className:\"onImg__userInfoDiv\",children:/*#__PURE__*/_jsx(\"p\",{className:\"onImg__nameP\",children:_this5.state.name})})]})]},elem[6]);})}),/*#__PURE__*/_jsx(\"div\",{className:\"rightImagesDiv\",id:\"rightImagesDiv\",children:this.state.rightImages.map(function(elem){return/*#__PURE__*/_jsxs(\"div\",{className:\"rightImageHolder\",id:\"rightImageHolder\"+elem[6],onClick:_this5.preparePicToOpen,imgid:elem[6],children:[/*#__PURE__*/_jsx(\"img\",{onMouseEnter:_this5.showOnImageInfo,onMouseLeave:_this5.hideOnPicImageInfo,id:elem[6],className:\"rightImg\",alt:elem[7],title:elem[7],src:elem[0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"onImg__innerInfoDiv\",id:\"onImg__innerInfoDiv\"+elem[6],children:[/*#__PURE__*/_jsx(\"img\",{className:\"onImg__profile_photo\",alt:\"profile_photo\",src:_this5.state.profileImg}),/*#__PURE__*/_jsx(\"div\",{className:\"onImg__userInfoDiv\",children:/*#__PURE__*/_jsx(\"p\",{className:\"onImg__nameP\",children:_this5.state.name})})]})]},elem[6]);})})]}),this.state.images===\"empty\"&&this.state.leftImages.length>1?/*#__PURE__*/_jsxs(\"p\",{id:\"noMoreImgs\",children:[\"No more photos to display for '\",this.props.mainInput,\"' query.\"]}):null,this.state.showParticularPic?/*#__PURE__*/_jsx(OpenedImage,{id:this.state.imgId,rawImg:this.state.rawImg,openImage:this.openImage,name:this.state.name,username:this.state.username,location:this.state.location,profileImg:this.state.profileImg,picOrientation:this.state.picOrientation}):null]});}}]);return SecondPage;}(React.Component);export{SecondPage as default};","map":{"version":3,"sources":["C:/Users/MateBook/Desktop/look-for-image/src/secondPage.js"],"names":["React","OpenedImage","lupe","cross","arrow","tomTomApiKey","APIAccessKey","SecondPage","props","state","showParticularPic","images","leftImages","midImages","rightImages","query","mainInput","charAt","toUpperCase","slice","picOrientation","imgId","smallImg","rawImg","name","username","location","profileImg","scrollnum","imgsFromScroll","resizeImages","hints","tags","handleChange","bind","handleSubmit","clearInput","openImage","setPicData","fetchAPI","scrollUpdate","preparePicToOpen","showOnImageInfo","hideOnPicImageInfo","fetchApiHints","handleArrow","handleTag","scrollRigth","scrollLeft","page","inpValue","fetch","then","response","json","data","fetchedUrls","results","map","elem","urls","small","regular","user","profile_image","medium","id","alt_description","setState","length","concat","filter","_","i","gettags","title","e","Set","catch","err","console","log","lastDiv","document","querySelector","getBoundingClientRect","bottom","window","innerHeight","event","target","userInfoDiv","getElementById","resizeUserInfoDiv","style","addEventListener","inp","eventSource","value","key","setMainInput","toLowerCase","preventDefault","upperCaseInputFirstChar","pic","picContainer","className","includes","push","picWidth","width","picHeight","height","regex","RegExp","res","fetchedDesriptions","segments","setData","filteredData","match","changePage","tag","innerTagsDiv","scrollBy","lA","tagHolderslist","querySelectorAll","rA","right","left","color","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport OpenedImage from './openedImage';\r\nimport lupe from './icons/loupe.png';\r\nimport cross from \"./icons/letter-x.png\";\r\nimport arrow from './icons/arrow.png'\r\n\r\nconst tomTomApiKey = \"MmTYW8cbCvlP0Ldmo9cUDGwEyyqEUq0G\"\r\nconst APIAccessKey = \"6PMB_sssC924TiZ3jPaY4Iwo4KZ0E6d6xZ0dgSbK4_g\";\r\n\r\nexport default class SecondPage extends React.Component{\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        showParticularPic: false,\r\n        images: [],\r\n        leftImages: [],\r\n        midImages: [],\r\n        rightImages: [],\r\n        query: props.mainInput.charAt(0).toUpperCase() + props.mainInput.slice(1),\r\n        picOrientation: \"\",\r\n        imgId: \"\",\r\n        smallImg: \"\",\r\n        rawImg: \"\",\r\n        name: \"\",\r\n        username: \"\",\r\n        location: \"\",\r\n        profileImg: \"\",\r\n        scrollnum: 1,\r\n        imgsFromScroll: [],\r\n        resizeImages: [],\r\n        hints: [],\r\n        tags: []\r\n      }\r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n      this.clearInput = this.clearInput.bind(this);\r\n      this.openImage = this.openImage.bind(this);\r\n      this.setPicData = this.setPicData.bind(this);\r\n      this.fetchAPI = this.fetchAPI.bind(this);\r\n      this.scrollUpdate = this.scrollUpdate.bind(this);\r\n      this.preparePicToOpen = this.preparePicToOpen.bind(this);\r\n      this.showOnImageInfo = this.showOnImageInfo.bind(this);\r\n      this.hideOnPicImageInfo = this.hideOnPicImageInfo.bind(this);\r\n      this.fetchApiHints = this.fetchApiHints.bind(this);\r\n      this.handleArrow = this.handleArrow.bind(this);\r\n      this.handleTag = this.handleTag.bind(this);\r\n      this.scrollRigth = this.scrollRigth.bind(this);\r\n      this.scrollLeft = this.scrollLeft.bind(this);\r\n    }\r\n    fetchAPI(page, inpValue){\r\n  \r\n      fetch(\"https://api.unsplash.com/search/photos/?\"\r\n      + \"&client_id=\" + APIAccessKey\r\n      + \"&query=\" + this.props.mainInput\r\n      + \"&per_page=30\"\r\n      + \"&page=\" + page\r\n      )\r\n      .then(response => response.json())\r\n      .then((data, fetchedUrls) => fetchedUrls = data.results.map(elem => [elem.urls.small, elem.urls.regular, elem.user.name,\r\n      elem.user.username, elem.user.location, elem.user.profile_image.medium, elem.id, elem.alt_description, elem.tags]))\r\n      .then(data => this.setState({images: data.length > 0 ? data : \"empty\"}))\r\n      .then(data => this.setState({leftImages: this.state.images === \"empty\" ? this.state.leftImages\r\n       : this.state.leftImages.concat(this.state.images.filter((function(_, i){return i % 3 === 0})))}))\r\n      .then(data => this.setState({midImages: this.state.images === \"empty\" ? this.state.midImages \r\n      :this.state.midImages.concat(this.state.images.slice(2).filter((function(_, i){return i % 3 === 0})))}))\r\n      .then(data => this.setState({rightImages: this.state.images === \"empty\" ? this.state.rightImages \r\n      :this.state.rightImages.concat(this.state.images.slice(1).filter((function(_, i){return i % 3 === 0})))}))\r\n      .then(data => this.setState({resizeImages: this.state.images === \"empty\" ? this.state.resizeImages \r\n      :this.state.resizeImages.concat(this.state.images)}))\r\n      .then(gettags => gettags = this.state.images.map(elem => elem[8].length > 1 ? elem[8][1] : null).filter(elem => elem !== null)\r\n      .map(elem => elem.title).filter(e => e !== this.props.mainInput).filter(e => e.length <= 16))\r\n      .then( data => this.setState({tags: [...new Set(data)]}))\r\n      .catch(err => console.log(err))\r\n\r\n      // to hide no hints alert and tags\r\n      this.clearInput()\r\n      this.setState({tags: []})\r\n      \r\n    }\r\n    scrollUpdate(){\r\n      if(this.state.showParticularPic === true || this.state.images === \"empty\"){\r\n        return;\r\n      }\r\n      const lastDiv = document.querySelector(\".secondPage__imagesContainer\")\r\n      if(lastDiv.getBoundingClientRect().bottom -1 < window.innerHeight){\r\n        this.fetchAPI(this.state.scrollnum + 1);\r\n        this.setState({\r\n          scrollnum: this.state.scrollnum + 1\r\n        })\r\n      }\r\n    }\r\n    showOnImageInfo(event){\r\n\r\n      this.setPicData(event)\r\n      \r\n      const id = event.target.id\r\n      const userInfoDiv = document.getElementById(\"onImg__innerInfoDiv\"+id)\r\n      const resizeUserInfoDiv = document.getElementById(\"resize__onImg__innerInfoDiv\"+id)\r\n      \r\n      userInfoDiv.style[\"display\"] = \"flex\";\r\n      resizeUserInfoDiv.style[\"display\"] = \"flex\";\r\n    }\r\n    hideOnPicImageInfo(event){\r\n      \r\n      const id = event.target.id\r\n      const userInfoDiv = document.getElementById(\"onImg__innerInfoDiv\"+id)\r\n      const resizeUserInfoDiv = document.getElementById(\"resize__onImg__innerInfoDiv\"+id)\r\n      userInfoDiv.style[\"display\"] = \"none\";\r\n      resizeUserInfoDiv.style[\"display\"] = \"none\";\r\n    }\r\n    componentDidMount(){\r\n  \r\n      this.fetchAPI(1)\r\n      // console.log(this.state.images)\r\n  \r\n      // scroll function\r\n      window.addEventListener('scroll', this.scrollUpdate)\r\n\r\n      // fetch on hints list click\r\n      const inp = document.getElementById(\"secondPage__form__search\")\r\n      let eventSource = null;\r\n      let value = '';\r\n\r\n      inp.addEventListener('keydown', (e) => {\r\n        eventSource = e.key ? '' : 'list';\r\n      });\r\n      inp.addEventListener('input', (e) => {\r\n        value = e.target.value;\r\n        if (eventSource === 'list') {\r\n          this.setState({\r\n            images: [],\r\n            leftImages: [],\r\n            midImages: [],\r\n            rightImages: [],\r\n            resizeImages: []\r\n          })\r\n          this.props.setMainInput(value)\r\n          this.setState({query: value})\r\n          this.fetchAPI(1)\r\n        }\r\n      });\r\n\r\n    }\r\n    async handleChange(event){\r\n      await this.props.setMainInput(event.target.value.toLowerCase())\r\n\r\n      if(event.target.value.length > 2){\r\n        this.fetchApiHints()        \r\n      } else {\r\n        this.setState({hints: []})\r\n      }\r\n    }\r\n    handleSubmit(event){\r\n      event.preventDefault();\r\n  \r\n      this.setState({\r\n        images: [],\r\n        leftImages: [],\r\n        midImages: [],\r\n        rightImages: [],\r\n        resizeImages: []\r\n      })\r\n      this.fetchAPI(1)\r\n  \r\n      const upperCaseInputFirstChar = this.props.mainInput.charAt(0).toUpperCase() + this.props.mainInput.slice(1);\r\n      this.setState({\r\n        query: upperCaseInputFirstChar\r\n      })\r\n    }\r\n    clearInput(){ \r\n      const inp = document.querySelector(\".secondPage__form__search\")\r\n      if(inp.value === \"\"){\r\n        return;\r\n      }\r\n      this.props.setMainInput(\"\")\r\n      inp.value = \"\"\r\n      this.setState({hints: []})\r\n    }\r\n    openImage(event){\r\n      this.setState({\r\n        showParticularPic: !this.state.showParticularPic\r\n      })\r\n    }\r\n    setPicData(event){\r\n      const pic = []\r\n      const id = event.target.id\r\n      const picContainer = event.target.className\r\n      if(picContainer === \"leftImg\"){\r\n        this.state.leftImages.map(elem => elem.includes(id) ? pic.push(elem) : null)\r\n      } \r\n      else if (picContainer === \"midImg\"){\r\n        this.state.midImages.map(elem => elem.includes(id) ? pic.push(elem) : null)\r\n      }\r\n      else if (picContainer === \"rightImg\"){\r\n        this.state.rightImages.map(elem => elem.includes(id) ? pic.push(elem) : null)\r\n      }\r\n      else if (picContainer === \"resizeImg\"){\r\n        this.state.resizeImages.map(elem => elem.includes(id) ? pic.push(elem) : null)\r\n      }\r\n      \r\n      this.setState({\r\n        imgId: pic[0][6],\r\n        rawImg: pic[0][1],\r\n        name: pic[0][2],\r\n        username: pic[0][3],\r\n        location: pic[0][4],\r\n        profileImg: pic[0][5]\r\n      })\r\n    }\r\n    preparePicToOpen(event){\r\n  \r\n      this.setPicData(event)\r\n  \r\n      const picWidth = event.target.width\r\n      const picHeight = event.target.height\r\n  \r\n      if(picWidth >= picHeight){\r\n        this.setState({\r\n          picOrientation: \"horizontal\"\r\n        }) \r\n      }else{\r\n        this.setState({\r\n          picOrientation: \"vertical\"\r\n        }) \r\n      }\r\n  \r\n      this.openImage()\r\n    }\r\n    fetchApiHints(){\r\n      const regex = new RegExp(`${this.props.mainInput}`)\r\n      fetch(\"https://api.tomtom.com/search/\"\r\n        + \"2\"\r\n        + \"/autocomplete/\"\r\n        + this.props.mainInput\r\n        + \".\"\r\n        + \"json\"\r\n        + \"?key=\" + tomTomApiKey\r\n        + \"&language=en-GB\"\r\n        + \"&limit=8\")\r\n        .then(res => res.json())\r\n        .then((data, fetchedDesriptions) => fetchedDesriptions = data.results.map(elem => elem.segments[0].value.toLowerCase()))\r\n        .then((data, setData) => setData = [...new Set(data)])\r\n        .then((data, filteredData) => filteredData = data.filter(elem => elem.match(regex)))\r\n        // .then((data, clearedData) => clearedData = data.filter(elem => elem !== this.props.mainInput))\r\n        .then((data) => this.setState({hints: data.length < 1 ? [\"No hints for choosen query\"] : data}))\r\n        .catch(err => this.setState({hints: []}))\r\n    }\r\n    handleArrow(){\r\n      this.props.changePage()\r\n    }\r\n    async handleTag(event){\r\n      \r\n      const tag = event.target.id\r\n      await this.props.setMainInput(tag)\r\n      this.setState({query: tag.charAt(0).toUpperCase() + tag.slice(1) })\r\n      this.setState({\r\n        images: [],\r\n        leftImages: [],\r\n        midImages: [],\r\n        rightImages: [],\r\n        resizeImages: []\r\n      })\r\n      this.fetchAPI(1);\r\n    }\r\n    scrollRigth(){\r\n      const innerTagsDiv = document.getElementById(\"innerTagsDiv\")\r\n      innerTagsDiv.scrollBy(350, 0);\r\n\r\n      const lA = document.getElementById(\"leftArrowHolder\")\r\n      lA.style[\"visibility\"] = \"visible\";\r\n\r\n      const tagHolderslist = document.querySelectorAll(\".tagHolder\")\r\n      const rA = document.getElementById(\"rightArrowHolder\")\r\n      if(tagHolderslist[tagHolderslist.length -1].getBoundingClientRect().right < rA.getBoundingClientRect().right){\r\n        rA.style[\"visibility\"] = \"hidden\";\r\n      }\r\n    }\r\n    scrollLeft(){\r\n      const innerTagsDiv = document.getElementById(\"innerTagsDiv\")\r\n      innerTagsDiv.scrollBy(-350, 0);\r\n\r\n      const rA = document.getElementById(\"rightArrowHolder\")\r\n      rA.style[\"visibility\"] = \"visible\";\r\n\r\n      const tagHolderslist = document.querySelectorAll(\".tagHolder\")\r\n      const lA = document.getElementById(\"leftArrowHolder\")\r\n      if(tagHolderslist[0].getBoundingClientRect().left > lA.getBoundingClientRect().left){\r\n        lA.style[\"visibility\"] = \"hidden\";\r\n        }\r\n    }\r\n    handleTagArrows(){\r\n      const rA = document.getElementById(\"rightArrowHolder\")\r\n      console.log(rA.getBoundingClientRect().bottom)\r\n    }\r\n    componentDidUpdate(){\r\n      if(this.state.tags.length > 1){\r\n        \r\n        const rA = document.getElementById(\"rightArrowHolder\")\r\n        const tagHolderslist = document.querySelectorAll(\".tagHolder\")\r\n        if(tagHolderslist[tagHolderslist.length -1].getBoundingClientRect().right > rA.getBoundingClientRect().left &&\r\n        tagHolderslist[tagHolderslist.length -1].getBoundingClientRect().right > rA.getBoundingClientRect().right){\r\n          rA.style[\"visibility\"] = \"visible\";\r\n        }\r\n      }\r\n    }\r\n    render(){\r\n    return(\r\n      <div className=\"secondPageMainDiv\" id=\"secondPageMainDiv\">\r\n        <img onClick={this.handleArrow} alt=\"left_arrow_icon\" src={arrow} title=\"Go back\" className=\"arrowBack\" id=\"arrowBack\" />\r\n        <form className=\"secondPage__form\" onSubmit={this.handleSubmit}>\r\n          <button onClick={this.handleSubmit} title=\"Search for pictures\" type=\"button\" className=\"secondPage__form__lupeBtn\" ><img className=\"lupeIcon\" alt=\"lupe_icon\" src={lupe} /></button>\r\n          <input list=\"autocomplite\" autoComplete=\"off\" title=\"Search for pictures\" required onChange={this.handleChange} placeholder=\"Search...\" id=\"secondPage__form__search\" className=\"secondPage__form__search\" type=\"search\" />\r\n          <datalist id=\"autocomplite\">\r\n              {this.state.hints.map(elem => {\r\n                return <option key={elem} value={elem}>{elem}</option>\r\n              })}\r\n            </datalist>\r\n          <button title=\"Clear form\" type=\"button\" onClick={this.clearInput} className=\"secondPage__form__clearBtn\"><img className=\"crossIcon\" alt=\"cross_icon\" src={cross} /></button>\r\n        </form>\r\n        <div className=\"alertDiv\">\r\n          <p className=\"alertP\">{this.state.hints[0] === \"No hints for choosen query\" ? \" -- \" + this.state.hints[0] : null}</p>\r\n        </div>\r\n        <h1 className=\"secondPage__h1\">{this.state.query}</h1>\r\n\r\n        {this.state.tags.length > 1 ?\r\n        <div className=\"mainTagsDiv\" id=\"mainTagsDiv\">\r\n          <div className=\"leftArrowHolder\" id=\"leftArrowHolder\">\r\n            <div onClick={this.scrollLeft} className=\"leftArrow\"></div>\r\n          </div>\r\n          <div className=\"rightArrowHolder\" id=\"rightArrowHolder\">\r\n            <div onClick={this.scrollRigth} className=\"rightArrow\"></div>\r\n          </div>\r\n          <div className=\"innerTagsDiv\" id=\"innerTagsDiv\">\r\n          {this.state.tags.map(elem => {\r\n                  return <div onClick={this.handleTag} id={elem} key={elem + \"LI\"} className=\"tagHolder\">\r\n                      <p id={elem} key={elem} className=\"tagP\">{elem.charAt(0).toUpperCase() + elem.slice(1)}</p>\r\n                        </div>\r\n                      })}\r\n          </div>\r\n        </div> : null}\r\n       \r\n        <div className=\"secondPage__imagesContainer\" id=\"secondPage__imagesContainer\">\r\n  \r\n          {/* just for resize */}\r\n          <div className=\"resizeImagesDiv\" id=\"resizeImagesDiv\">\r\n            {this.state.resizeImages.length > 0 ? this.state.resizeImages.map(elem => {\r\n                return (\r\n                  <div className=\"resizeImageHolder\" id={\"resizeImageHolder\"+elem[6]} onClick={this.preparePicToOpen} key={elem[6]} imgid={elem[6]}>\r\n                  <img onMouseEnter={this.showOnImageInfo} onMouseLeave={this.hideOnPicImageInfo} id={elem[6]} className=\"resizeImg\" alt={elem[7]} src={elem[0]} />\r\n                    <div className=\"resize__onImg__innerInfoDiv\" id={\"resize__onImg__innerInfoDiv\"+elem[6]}>\r\n                      <img className=\"resize__onImg__profile_photo\" alt=\"profile_photo\" src={this.state.profileImg} />\r\n                      <div className=\"resize__onImg__userInfoDiv\">\r\n                        <p className=\"resize__onImg__nameP\">{this.state.name}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              }) : <h2 style={{color: \"red\"}}>No results for given queries. Try with another ones.</h2> }\r\n          </div>\r\n          <div className=\"leftImagesDiv\" id=\"leftImagesDiv\">\r\n  \r\n            {this.state.leftImages.length > 0 ? this.state.leftImages.map(elem => {\r\n              return (\r\n                <div className=\"leftImageHolder\" id={\"leftImageHolder\"+elem[6]} onClick={this.preparePicToOpen} key={elem[6]} imgid={elem[6]}>\r\n                  <img onMouseEnter={this.showOnImageInfo} onMouseLeave={this.hideOnPicImageInfo} id={elem[6]} className=\"leftImg\" alt={elem[7]} src={elem[0]} title={elem[7]} />\r\n                  <div className=\"onImg__innerInfoDiv\" id={\"onImg__innerInfoDiv\"+elem[6]}>\r\n                    <img className=\"onImg__profile_photo\" alt=\"profile_photo\" src={this.state.profileImg} />\r\n                    <div className=\"onImg__userInfoDiv\">\r\n                      <p className=\"onImg__nameP\">{this.state.name}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )\r\n            }) : <h2 style={{color: \"red\"}}>No results for given queries. Try with another ones.</h2> }\r\n          </div>\r\n          <div className=\"midImagesDiv\" id=\"midImagesDiv\">\r\n            {this.state.midImages.map(elem => {\r\n                return (\r\n                  <div className=\"midImageHolder\" id={\"midImageHolder\"+elem[6]} onClick={this.preparePicToOpen} key={elem[6]} imgid={elem[6]}>\r\n                    <img onMouseEnter={this.showOnImageInfo} onMouseLeave={this.hideOnPicImageInfo} id={elem[6]} className=\"midImg\" alt={elem[7]} src={elem[0]} title={elem[7]} />\r\n                    <div className=\"onImg__innerInfoDiv\" id={\"onImg__innerInfoDiv\"+elem[6]}>\r\n                      <img className=\"onImg__profile_photo\" alt=\"profile_photo\" src={this.state.profileImg} />\r\n                      <div className=\"onImg__userInfoDiv\">\r\n                        <p className=\"onImg__nameP\">{this.state.name}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n          </div>\r\n          <div className=\"rightImagesDiv\" id=\"rightImagesDiv\">\r\n            {this.state.rightImages.map(elem => {\r\n                return (\r\n                <div className=\"rightImageHolder\" id={\"rightImageHolder\"+elem[6]} onClick={this.preparePicToOpen} key={elem[6]} imgid={elem[6]}>\r\n                  <img onMouseEnter={this.showOnImageInfo} onMouseLeave={this.hideOnPicImageInfo} id={elem[6]} className=\"rightImg\" alt={elem[7]} title={elem[7]} src={elem[0]} />\r\n                  <div className=\"onImg__innerInfoDiv\" id={\"onImg__innerInfoDiv\"+elem[6]}>\r\n                    <img className=\"onImg__profile_photo\" alt=\"profile_photo\" src={this.state.profileImg} />\r\n                    <div className=\"onImg__userInfoDiv\">\r\n                      <p className=\"onImg__nameP\">{this.state.name}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                )\r\n              })}\r\n          </div>\r\n        </div>\r\n        {this.state.images === \"empty\" && this.state.leftImages.length > 1 ? <p id=\"noMoreImgs\">No more photos to display for '{this.props.mainInput}' query.</p> : null}\r\n        {this.state.showParticularPic ? <OpenedImage id={this.state.imgId} rawImg={this.state.rawImg} openImage={this.openImage}\r\n        name={this.state.name} username={this.state.username} location={this.state.location} profileImg={this.state.profileImg} \r\n        picOrientation={this.state.picOrientation}/> : null}\r\n      </div>\r\n    )}\r\n  }"]},"metadata":{},"sourceType":"module"}